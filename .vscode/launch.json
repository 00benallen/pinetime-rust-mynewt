{
    //  VSCode Debugger Config for Cortex Debug Extension and for QEMU Blue Pill Emulator.
    //  Manually overwrite launch.json by this file.
    "version": "0.2.0",
    "configurations": [
        {
            //  Cortex Debug Configuration: https://marcelball.ca/projects/cortex-debug/cortex-debug-launch-configurations/
            "name": "Blue Pill",
            "type": "cortex-debug",
            "request": "launch",
            "servertype": "openocd",
            "cwd": "${workspaceRoot}",
            "executable": "bin/targets/bluepill_my_sensor/app/apps/my_sensor_app/my_sensor_app.elf",
            // "executable": "bin/targets/bluepill_boot/app/apps/boot/boot.elf",
            "device": "STM32F103C8",
            "configFiles": [ 
                "interface/stlink-v2.cfg",
                "target/stm32f1x.cfg",
                "scripts/debug.ocd" 
            ],
            "preLaunchCommands": [
                "set remotetimeout 60",

                //  This indicates that an unrecognized breakpoint location should automatically result in a pending breakpoint being created.
                "set breakpoint pending on",
            
                //  Display the instruction when hitting breakpoint.
                "display/i $pc",

                //  "symbol-file bin/targets/bluepill_boot/app/apps/boot/boot.elf",
                //  "symbol-file bin/targets/bluepill_my_sensor/app/apps/my_sensor_app/my_sensor_app.elf",

            ],
            "postLaunchCommands": [
                "stepi",  //  Must step before setting PC.
                "set $pc = Reset_Handler",  //  Prepare to jump to the application's Reset Handler.
                "stepi",  //  Execute the Reset Handler.
                "break main",  //  Break at main().
                "step",
                //  "monitor sleep 1000",
                //  "continue",  //  Run until main().
            ],
            "preAttachCommands": [
            ],
            "postAttachCommands": [
            ],
            "preRestartCommands": [
            ],
            "postRestartCommands": [
            ],        
        }
    ]
}